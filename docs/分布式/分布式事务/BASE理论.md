> `CAP`是分布式系统设计理论，`BASE`是`CAP`理论中`AP`方案的延伸，对于`C`我们采用的方式和策略就是保证最终一致性；

`eBay`的架构师`Dan Pritchett`源于对大规模分布式系统的实践总结，在`ACM`上发表文章提出`BASE`理论，`BASE`理论是对`CAP`理论的延伸，核心思想是即使无法做到强一致性（`StrongConsistency`，`CAP`的一致性就是强一致性），
但应用可以采用适合的方式达到最终一致性（`Eventual Consitency`）。

## 一、BASE定理

`BASE`是`Basically Available`（基本可用）、`Soft state`（软状态）和`Eventually consistent`（最终一致性）三个短语的缩写。`BASE`基于`CAP`定理演化而来，核心思想是即时无法做到强一致性，但每个应用都可以根据自身业务特点，采用适当的方式来使系统达到最终一致性。

### 1、Basically Available（基本可用）

基本可用是指分布式系统在出现不可预知的故障的时候，允许损失部分可用性，但不等于系统不可用。

1. 响应时间上的损失

    当出现故障时，响应时间增加

2. 功能上的损失

    当流量高峰期时，屏蔽一些功能的使用以保证系统稳定性（服务降级）

### 2、Soft state（软状态）

> 指允许系统中的数据存在中间状态，并认为该中间状态的存在不会影响系统的整体可用性。

与硬状态相对，即是指允许系统中的数据存在中间状态，并认为该中间状态的存在不会影响系统的整体可用性，即允许系统在不同节点的数据副本之间进行数据同步的过程存在延时。

### 3、Eventually consistent（最终一致性）

强调系统中所有的数据副本，在经过一段时间的同步后，最终能够达到一个一致的状态。其本质是需要系统保证最终数据能够达到一致，而不需要实时保证系统数据的强一致性。

**最终一致性可分为如下几种：**

* **（1）因果一致性（`Causal consistency`）**

    即进程A在更新完数据后通知进程B，那么之后进程B对该项数据的范围都是进程A更新后的最新值。

* **（2）读己之所写（`Read your writes`）**

    进程A更新一项数据后，它自己总是能访问到自己更新过的最新值。

* **（3）会话一致性（`Session consistency`）**

    将数据一致性框定在会话当中，在一个会话当中实现读己之所写的一致性。即执行更新后，客户端在同一个会话中始终能读到该项数据的最新值

* **（4）单调读一致性（`Monotonic read consistency`）**

    如果一个进程从系统中读取出一个数据项的某个值后，那么系统对于该进程后续的任何数据访问都不应该返回更旧的值。


* **（5）单调写一致性（`Monotoic write consistency`）**

    一个系统需要保证来自同一个进程的写操作被顺序执行。

`BASE`理论是提出通过牺牲一致性来获得可用性，并允许数据在一段时间内是不一致的，但最终达到一致状态。

## 二、BASE理论的特点

`BASE`理论面向的是大型高可用可扩展的分布式系统，和传统的事物`ACID`特性是相反的。

它完全不同于`ACID`的强一致性模型，而是通过牺牲强一致性来获得可用性，并允许数据在一段时间内是不一致的，但最终达到一致状态。

但同时，在实际的分布式场景中，不同业务单元和组件对数据一致性的要求是不同的，因此在具体的分布式系统架构设计过程中，`ACID`特性和`BASE`理论往往又会结合在一起。

## 三、BASE理论与CAP的关系

`BASE`理论是对`CAP`中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结， 是基于`CAP`定理逐步演化而来的。`BASE`理论的核心思想是：**即使无法做到强一致性，但每个应用都可以根据自身业务特点，采用适当的方式来使系统达到最终一致性。**

`BASE`理论其实就是对`CAP`理论的延伸和补充，主要是对`AP`的补充。牺牲数据的强一致性，来保证数据的可用性，虽然存在中间装填，但数据最终一致。

## 四、ACID和BASE的区别与联系

`ACID` 是传统数据库常用的设计理念，追求强一致性模型。`BASE` 支持的是大型分布式系统，提出通过牺牲强一致性获得高可用性。

`ACID` 和 `BASE` 代表了两种截然相反的设计哲学，在分布式系统设计的场景中，系统组件对一致性要求是不同的，因此 `ACID` 和 `BASE` 又会结合使用。