>元空间会产生内存溢出么？在什么情况下会产生内存溢出？

## 回答

元空间会发生内存溢出，主要原因是加载到内存中的 `class` 数量太多或者体积太大

## 解析

### 先要了解一下什么是 Metaspace

`Metaspace`元数据空间，专门用来存储`类的元数据`，它是 `JDK8` 中用来替代 `Perm` 的特殊数据结构。



`Metaspace` 空间被分配在`本地内存`中(非堆上)，默认不限制内存使用，可以使用 `MaxMetaspaceSize` 指定最大值。`MetaspaceSize` 指定最小值，默认 `21 M`。
通过 `mmap` 来从操作系统申请内存，申请的内存会分成一个一个 `Metachunk`，以 `Metachunk` 为单位将内存分配给类加载器，**每个 Metachunk 对应唯一一个类加载器，一个类加载器可以有多个 Metachunk** 。

类加载器被回收，它所加载的类也会被回收，如果类有被引用，肯定不能被回收





